<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Semester ‚Äî Farmasi dengan Hati</title>
<style>
:root{
  --bg1:#160e2a;--bg2:#0b1740;
  --text:#eef2ff;--muted:#b6c3ff;
  --stroke:rgba(255,255,255,.14);
  --accent:#a78bfa;--accent2:#60a5fa;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(167,139,250,.25), transparent 60%),
    radial-gradient(1000px 600px at 120% 120%, rgba(96,165,250,.25), transparent 60%),
    linear-gradient(145deg,var(--bg1),var(--bg2));
}
.wrap{max-width:1060px;margin:0 auto;padding:28px 16px}
h1{margin:0 0 8px;font-size:30px}
h2,h3{color:var(--accent);margin:0 0 8px}
.muted{color:var(--muted)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
.card{
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.03));
  border:1px solid var(--stroke);
  border-radius:18px;
  padding:22px;
  transition:transform .18s ease, box-shadow .18s ease;
}
.card:hover{transform:translateY(-3px);box-shadow:0 10px 28px rgba(99,102,241,.25)}
.btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:12px 18px;border-radius:14px;
  font-weight:700;text-decoration:none;
  border:1px solid rgba(255,255,255,.2);color:#fff;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  box-shadow:0 8px 22px rgba(99,102,241,.25)
}
.btn.ghost{background:transparent;color:var(--text);border:1px solid var(--stroke);box-shadow:none}
.badge{display:inline-block;font-weight:700;font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(167,139,250,.22);border:1px solid var(--stroke);color:#e9e8ff;margin-bottom:10px}
.mod-list{display:flex;flex-direction:column;gap:8px;margin-top:12px}
.mod-row{display:flex;flex-wrap:wrap;gap:8px}
.chip{
  display:inline-flex;align-items:center;gap:6px;
  padding:8px 10px;border-radius:12px;border:1px solid var(--stroke);text-decoration:none;color:var(--text);
  background:rgba(255,255,255,.04);
  font-size:13px
}
.nav{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0 20px}
hr{border:none;border-top:1px solid var(--stroke);margin:22px 0}
.error{background:#b91c1c22;border:1px solid #b91c1c55;padding:14px;border-radius:12px}
</style>
</head>
<body>
  <div class="wrap">
    <p class="nav">
      <a class="btn ghost" href="farmasi-home.html">‚Üê portal farmasi</a>
      <a id="prevLink" class="btn ghost" href="#" style="display:none">‚Üê Semester sebelumnya</a>
      <a id="nextLink" class="btn ghost" href="#" style="display:none">Semester berikutnya ‚Üí</a>
    </p>

    <h1 id="semTitle">üìò Semester</h1>
    <p class="muted" id="semSub">Pilih mata kuliah untuk mulai perjalanan belajarmu üí´</p>

    <div id="cards" class="grid" aria-live="polite"></div>

    <hr/>
    <p class="muted">Catatan: tautan modul dibuat otomatis mengikuti pola <b>materi-&lt;slug&gt;-modulX.html</b> dan <b>kuis-&lt;slug&gt;-modulX.html</b>. Pastikan berkasnya ada ya, besti! üíú</p>

    <div id="errBox" class="error" style="display:none"></div>
  </div>

<script>
(function(){
  // Ambil ?id= dari URL (default 1)
  const params = new URLSearchParams(location.search);
  const semId = parseInt(params.get('id') || '1', 10);

  const els = {
    title: document.getElementById('semTitle'),
    sub: document.getElementById('semSub'),
    cards: document.getElementById('cards'),
    err: document.getElementById('errBox'),
    prev: document.getElementById('prevLink'),
    next: document.getElementById('nextLink'),
  };

  // Render satu kartu mata kuliah
  function renderCourseCard(course){
    const { name, slug, modules } = course;
    const card = document.createElement('div');
    card.className = 'card';

    const h3 = document.createElement('h3');
    h3.textContent = name;
    card.appendChild(h3);

    const badge = document.createElement('div');
    badge.className = 'badge';
    badge.textContent = `${modules} modul`;
    card.appendChild(badge);

    const modList = document.createElement('div');
    modList.className = 'mod-list';

    for(let i=1;i<=modules;i++){
      const row = document.createElement('div');
      row.className = 'mod-row';

      const tag = document.createElement('span');
      tag.className = 'chip';
      tag.textContent = `Modul ${i}`;
      row.appendChild(tag);

      const m = document.createElement('a');
      m.className = 'chip';
      m.href = `materi-${slug}-modul${i}.html`;
      m.setAttribute('aria-label', `Buka materi ${name} modul ${i}`);
      m.textContent = 'Materi';
      row.appendChild(m);

      const q = document.createElement('a');
      q.className = 'chip';
      q.href = `kuis-${slug}-modul${i}.html`;
      q.setAttribute('aria-label', `Buka kuis ${name} modul ${i}`);
      q.textContent = 'Kuis';
      row.appendChild(q);

      modList.appendChild(row);
    }

    card.appendChild(modList);
    return card;
  }

  // Render halaman untuk 1 semester
  function renderSemester(sem, total){
    els.title.textContent = `üìò ${sem.title}`;
    els.cards.innerHTML = '';

    // Nav prev/next
    if(sem.id > 1){
      els.prev.style.display = '';
      els.prev.href = `semester.html?id=${sem.id-1}`;
    } else {
      els.prev.style.display = 'none';
    }
    if(sem.id < total){
      els.next.style.display = '';
      els.next.href = `semester.html?id=${sem.id+1}`;
    } else {
      els.next.style.display = 'none';
    }

    for(const course of sem.courses){
      els.cards.appendChild(renderCourseCard(course));
    }
  }

  // Muat kurikulum.json
  fetch('kurikulum.json', {cache:'no-store'})
    .then(r => {
      if(!r.ok) throw new Error(`Gagal memuat kurikulum.json (${r.status})`);
      return r.json();
    })
    .then(data => {
      if(!data || !Array.isArray(data.semesters)) throw new Error('Struktur JSON tidak sesuai.');
      const list = data.semesters;
      const sem = list.find(s => s.id === semId) || list[0];

      if(!sem){
        throw new Error('Semester tidak ditemukan.');
      }
      renderSemester(sem, list.length);
    })
    .catch(err => {
      console.error(err);
      els.err.style.display = '';
      els.err.textContent = 'Ups, kurikulum belum kebaca. Pastikan file "kurikulum.json" ada di folder yang sama dan struktur datanya benar.';
    });

})();
</script>
</body>
</html>

